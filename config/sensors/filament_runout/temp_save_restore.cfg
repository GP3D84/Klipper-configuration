[gcode_macro TEMP_RESTORE]
gcode:
      {% set saved_temp = printer['gcode_macro _ATTEMPTS_VARIABLES'] %} 
      {% if (saved_temp.saved_temp == 0) %} 
        {% set USER_TEMP = printer.extruder.target %}   
      {% else %}
        {% set USER_TEMP = saved_temp.saved_temp %}              # Restore User Temp saved in external variable
      {% endif %} 
      {% set LOAD_TEMP = USER_TEMP %}
      SET_HEATER_TEMPERATURE HEATER=extruder TARGET={LOAD_TEMP}
      TEMPERATURE_WAIT SENSOR=extruder MINIMUM={LOAD_TEMP}

[gcode_macro TEMP_SAVE]
gcode:
      {% set USER_TEMP = printer.extruder.target %}
      SET_GCODE_VARIABLE MACRO=_ATTEMPTS_VARIABLES VARIABLE=saved_temp VALUE={USER_TEMP}
